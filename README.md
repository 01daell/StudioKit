# StudioKit

## Architecture Overview
StudioKit is a plain PHP 8.1+ application using a front controller and a lightweight internal router. The app follows an MVC-ish structure:

- **public/** for the front controller and assets.
- **app/** for controllers, models, services, and views.
- **config/** for generated configuration and the SQL schema.
- **storage/** for uploads, cache, logs, and installer lock.
- **vendor/** for bundled libraries (no Composer required on the server).

Core infrastructure includes `Router`, `Request`, `Response`, `DB` (PDO), `Auth`, `Session`, and `Installer` guards.

## Full Route Map

### Public
- `GET /`
- `GET /pricing`
- `GET /faq`
- `GET /share/{token}`

### Installer
- `GET /install`
- `POST /install`
- `GET /install/complete`

### Auth
- `GET /sign-up`, `POST /sign-up`
- `GET /sign-in`, `POST /sign-in`
- `POST /sign-out`
- `GET /forgot-password`, `POST /forgot-password`
- `GET /reset-password?token=...`, `POST /reset-password`

### App (protected)
- `GET /app`
- `GET /app/kits/new`
- `GET /app/kits/{id}`
- `POST /app/kits` (create)
- `POST /app/kits/{id}/update`
- `POST /app/kits/{id}/delete`
- `POST /app/kits/{id}/assets/upload`
- `POST /app/kits/{id}/assets/{assetId}/set-type`
- `POST /app/kits/{id}/assets/{assetId}/delete`
- `POST /app/kits/{id}/colors/save`
- `POST /app/kits/{id}/colors/reorder`
- `POST /app/kits/{id}/fonts/save`
- `POST /app/kits/{id}/templates/generate`
- `GET /app/kits/{id}/export`
- `GET /app/kits/{id}/export/pdf`
- `GET /app/kits/{id}/export/zip`
- `GET /app/kits/{id}/share`
- `POST /app/kits/{id}/share/create`
- `POST /app/kits/{id}/share/revoke`
- `GET /app/workspace/members`
- `POST /app/workspace/invite`
- `GET /app/settings`
- `GET /app/billing`
- `POST /app/billing/checkout`
- `GET /app/billing/portal`

### Stripe
- `POST /stripe/webhook`

## Database Schema (SQL)
See `config/schema.sql` for the complete SQL used by the installer. The installer executes this file idempotently.

## Installer Flow Outline
1. Welcome + license/terms checkbox
2. Requirements check (PHP/extensions/permissions)
3. Database setup (connection validation)
4. App settings (URL, name, admin, workspace)
5. Email settings (SMTP)
6. Stripe settings (keys, webhook secret, price IDs)
7. Install (write config, create tables, create admin/workspace, lock installer)

## File Tree
```
public/
  index.php
  .htaccess
  assets/
    styles.css
    app.js
app/
  Controllers/
  Models/
  Views/
  Services/
  Core/
  routes.php
config/
  config.php (generated by installer)
  schema.sql
storage/
  uploads/
  cache/
  logs/
vendor/
```

## cPanel Install Guide
1. **Upload files**
   - Upload the full StudioKit folder into `public_html/studiokit` (or directly into `public_html`).
2. **Enable rewrites**
   - Ensure Apache mod_rewrite is available (cPanel typically supports this).
   - The included `public/.htaccess` already rewrites requests to `index.php`.
3. **Visit the installer**
   - Open `https://yourdomain.com/studiokit/install` in the browser.
4. **Complete the wizard**
   - Enter database credentials, SMTP details, and Stripe keys.
5. **Sign in**
   - After completion, go to `/sign-in`.

## Troubleshooting (cPanel)
- **Pretty URLs not working**: Confirm `public/.htaccess` is present and `AllowOverride All` is enabled.
- **Missing extension errors**: Ask your host to enable `pdo_mysql`, `openssl`, `mbstring`, `gd`, or `zip`.
- **Permissions errors**: Set `storage/` and `config/` to writable (usually 775).
- **SMTP not sending**: Double-check SMTP host, port, and encryption with your cPanel mail settings.

## Sample Screenshot Placeholders (UI Instructions)
- `Dashboard` — placeholder: *[Screenshot: StudioKit dashboard with plan card and kit list]*
- `Brand Kit Builder` — placeholder: *[Screenshot: kit editor with logos, colors, and typography]*
- `Pricing Page` — placeholder: *[Screenshot: pricing grid with plan cards and comparison table]*

## UI Notes
- Use the **New Brand Kit** button from the dashboard to create your first kit.
- The **Share** tab generates a tokenized public URL for Pro+ workspaces.
- The **Export** tab includes PDF (all plans) and ZIP (Pro+) actions.

